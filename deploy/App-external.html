<!DOCTYPE html>
<html>
<head>
    <title>S838697-CustomList</title>

    <script type="text/javascript" src="https://rally1.rallydev.com/apps/2.1/sdk.js"></script>

    <script type="text/javascript">
        Rally.onReady(function () {
                !function(){var e=window.Ext4||window.Ext,t=function(e){return{name:e,xtype:"rallytextfield",hidden:!0,handlesEvents:{typeselected:function(e){this.setValue(null)}}}};e.define("Rally.apps.customlist.Settings",{singleton:!0,requires:["Rally.ui.combobox.FieldComboBox","Rally.ui.combobox.ComboBox","Rally.ui.CheckboxField"],getFields:function(l){return this.app=l,[{name:"type",xtype:"rallycombobox",allowBlank:!1,autoSelect:!1,shouldRespondToScopeChange:!0,context:this.app.getContext(),initialValue:"HierarchicalRequirement",storeConfig:{model:e.identityFn("TypeDefinition"),sorters:[{property:"DisplayName"}],fetch:["DisplayName","ElementName","TypePath","Parent","UserListable"],filters:[{property:"UserListable",value:!0}],autoLoad:!1,remoteSort:!1,remoteFilter:!0},displayField:"DisplayName",valueField:"TypePath",listeners:{select:function(e){this.app.clearFiltersAndSharedViews(),e.fireEvent("typeselected",e.getRecord().get("TypePath"),e.context)},scope:this},bubbleEvents:["typeselected"],readyEvent:"ready",handlesEvents:{projectscopechanged:function(e){this.refreshWithNewContext(e)}}},{type:"query"},{name:"showControls",xtype:"rallycheckboxfield",fieldLabel:"Show Control Bar"},t("columnNames"),t("order")]}})}();
                !function(){var e=window.Ext4||window.Ext;e.define("Rally.apps.customlist.CustomListApp",{extend:"Rally.app.GridBoardApp",requires:["Deft.Promise","Rally.apps.customlist.Settings","Rally.data.BulkRecordUpdater","Rally.data.ModelTypes","Rally.data.PreferenceManager","Rally.data.util.Sorter","Rally.data.wsapi.Filter","Rally.ui.gridboard.plugin.GridBoardInlineFilterControl","Rally.ui.gridboard.plugin.GridBoardSharedViewControl","Rally.ui.notify.Notifier","Rally.util.String"],disallowedAddNewTypes:["user","userprofile","useriterationcapacity","testcaseresult","task","scmrepository","project","changeset","change","builddefinition","build","program"],orderedAllowedPageSizes:[10,25,50,100,200],readOnlyGridTypes:["build","change","changeset"],statePrefix:"customlist",allowExpansionStateToBeSaved:!1,isEditable:!0,config:{defaultSettings:{showControls:!0,type:"PortfolioItem/Feature"}},initComponent:function(){this.appName="CustomList-"+this.getAppId(),this.defaultSettings.url&&e.apply(this.defaultSettings,{type:this.defaultSettings.url}),this.callParent(arguments)},getSettingsFields:function(){return Rally.apps.customlist.Settings.getFields(this)},loadModelNames:function(){return this.modelNames=_.compact(this.getTypeSetting()),this._setColumnNames(this._getColumnNamesSetting()),Deft.Promise.when(this.modelNames)},addGridBoard:function(){this.callParent(arguments),this.getSetting("showControls")||this.gridboard.getHeader().hide(),this.gridboard.config.columnCfgs=["Name","State","Priority","c_FeatureElaboratingDate"]},loadGridBoard:function(){_.isEmpty(this.modelNames)?e.defer(function(){this.fireEvent("settingsneeded",this),this.publishComponentReady()},1,this):(this.enableAddNew=this._shouldEnableAddNew(),this.enableRanking=this._shouldEnableRanking(),this.callParent(arguments))},getGridConfig:function(){var t=_.merge(this.callParent(arguments),{allColumnsStateful:!0,enableEditing:0===_.intersection(this.readOnlyGridTypes,this.getTypeSetting()).length,listeners:{beforestaterestore:this._onBeforeGridStateRestore,beforestatesave:this._onBeforeGridStateSave,scope:this},pagingToolbarCfg:{hidden:!this.getSetting("showControls"),pageSizes:this.orderedAllowedPageSizes}}),i=Rally.util.Filter.findInvalidSubFilters(this._getQueryFilter(),this.models);return i.length&&(t.store.on("beforeload",function(t){return e.defer(function(){t.fireEvent("load",t,t.getRootNode(),[],!0)},1),!1}),this._showInvalidQueryMessage(t,_.map(i,function(e){return'Could not find the attribute "'+e.property.split(".")[0]+'" on type "'+this.models[0].displayName+'" in the query segment "'+e.toString()+'"'},this))),t},getColumnCfgs:function(){return _.union(this.callParent(arguments),_.isEmpty(this.columnNames)&&this.enableRanking?["DragAndDropRank"]:[])},getFilterControlConfig:function(){return _.merge(this.callParent(arguments),{listeners:{beforestaterestore:{fn:this._onBeforeFilterButtonStateRestore,scope:this}}})},getGridBoardCustomFilterControlConfig:function(){var e=this.getContext(),t=this.models[0].isArtifact(),i=t?["ModelType","PortfolioItemType","LastResult"]:["ArtifactSearch","ModelType"],n=t?["Milestones","Tags","c_CapitalizableDate","c_FeatureElaboratingDate"]:[];this.models[0].isProject()?i.push("SchemaVersion"):this.models[0].isRelease()&&i.push("ChildrenPlannedVelocity","Version");var o={ptype:"rallygridboardinlinefiltercontrol",inlineFilterButtonConfig:{stateful:!0,stateId:e.getScopedStateId("custom-list-inline-filter"),legacyStateIds:[this.getScopedStateId("owner-filter"),this.getScopedStateId("custom-filter-button")],filterChildren:!0,inlineFilterPanelConfig:{quickFilterPanelConfig:{defaultFields:t?["ArtifactSearch","Owner"]:[],addQuickFilterConfig:{blackListFields:i,whiteListFields:n}},advancedFilterPanelConfig:{advancedFilterRowsConfig:{propertyFieldConfig:{blackListFields:i,whiteListFields:n}}}}}};return t?o.inlineFilterButtonConfig.modelNames=this.modelNames:o.inlineFilterButtonConfig.model=this.models[0],o},getSharedViewConfig:function(){return{ptype:"rallygridboardsharedviewcontrol",sharedViewConfig:{stateful:!0,stateId:this.getContext().getScopedStateId("custom-list-shared-view"),enableUrlSharing:!1!==this.isFullPageApp}}},getGridBoardConfig:function(){var e=this.callParent(arguments);return _.merge(e,{listeners:{viewchange:function(){this.loadGridBoard()},filterchange:function(){this.gridboard.getGridOrBoard().noDataPrimaryText=void 0,this.gridboard.getGridOrBoard().noDataSecondaryText=void 0},scope:this}})},onTreeGridReady:function(e){e.store.getTotalCount()>10&&this.gridboard.down("#pagingToolbar").show(),this.callParent(arguments),console.log("grid:",this.gridboard.plugins[2])},getGridStoreConfig:function(){var e=this._getValidSorters(Rally.data.util.Sorter.sorters(this.getSetting("order")));if(_.isEmpty(e)){var t=this.getContext().getWorkspace().WorkspaceConfiguration.DragDropRankingEnabled?"DragAndDropRank":"Rank",i=Rally.data.ModelTypes.areArtifacts(this.modelNames)?t:Rally.data.util.Sorter.getDefaultSort(this.modelNames[0]);e=Rally.data.util.Sorter.sorters(i)}return{listeners:{warning:{fn:this._onGridStoreWarning,scope:this}},pageSize:10,sorters:e}},getAddNewConfig:function(){return _.merge(this.callParent(arguments),{minWidth:700,openEditorAfterAddFailure:!1,margin:0})},getFieldPickerConfig:function(){return _.merge(this.callParent(arguments),{buttonConfig:{disabled:!this._userHasPermissionsToEditPanelSettings()},gridAlwaysSelectedValues:function(){return[]},gridFieldBlackList:this._shouldEnableRanking()?[]:["Rank"]})},getPermanentFilters:function(){return this._getQueryFilter().concat(this._getTimeboxScopeFilter()).concat(this._getProjectFilter())},onTimeboxScopeChange:function(){this.callParent(arguments),this.loadGridBoard()},clearFiltersAndSharedViews:function(){var t=this.getContext();this.gridboard&&(this.gridboard.down("rallyinlinefilterpanel").clear(),this.gridboard.down("rallysharedviewcombobox").reset()),e.create("Rally.data.wsapi.Store",{model:e.identityFn("preference"),autoLoad:!0,filters:[{property:"AppId",value:t.getAppId()},{property:"Type",value:"View"},{property:"Workspace",value:t.getWorkspace()._ref}],context:t.getDataContext(),listeners:{load:function(t,i){if(!_.isEmpty(i)){var n=e.create("Rally.data.wsapi.batch.Store",{requester:this,data:i});n.removeAll(),n.sync()}t.destroyStore()},scope:this}})},getTypeSetting:function(){return(this.getSetting("type")||this.getSetting("url")||"").toLowerCase().split(",")},_getColumnNamesSetting:function(){return console.log("getColumnNames",this.getSetting("columnNames")),this.getSetting("columnNames")||(this.getSetting("fetch")||"").split(",")},_getQueryFilter:function(){var t=new e.Template(this.getSetting("query")).apply({projectName:this.getContext().getProject().Name,projectOid:this.getContext().getProject().ObjectID,user:this.getContext().getUser()._ref});if(t)try{return[Rally.data.wsapi.Filter.fromQueryString(t)]}catch(e){Rally.ui.notify.Notifier.showError({message:e.message})}return[]},_getProjectFilter:function(){return"milestone"===this.modelNames[0].toLowerCase()?[Rally.data.wsapi.Filter.or([{property:"Projects",operator:"contains",value:this.getContext().getProjectRef()},{property:"TargetProject",operator:"=",value:null}])]:[]},_getTimeboxScopeFilter:function(){var e=this.getContext().getTimeboxScope();return e&&_.any(this.models,e.isApplicable,e)?[e.getQueryFilter()]:[]},_shouldEnableAddNew:function(){return 0===_.intersection(this.disallowedAddNewTypes,this.getTypeSetting()).length},_shouldEnableRanking:function(){return!_.contains(this.getTypeSetting(),"task")},_setColumnNames:function(e){this.columnNames=_.compact(_.isString(e)?e.split(","):e),console.log("setting columns:",this.columnNames)},_onBeforeFilterButtonStateRestore:function(e,t){if(t&&t.filters&&t.filters.length){var i=_.map(t.filters,function(e){return Rally.data.wsapi.Filter.fromQueryString(e)}),n=Rally.util.Filter.removeNonapplicableTypeSpecificFilters(i,this.models);t.filters=_.invoke(n,"toString")}},_hasViewSelected:function(){var t=this.getSharedViewConfig().sharedViewConfig;if(t&&t.stateId){var i=(e.state.Manager.get(t.stateId)||{}).value;return!_.isEmpty(i)}return!1},_onBeforeGridStateRestore:function(e,t){if(t){if(t.columns){console.log("state",t),console.log("state.columns",t.columns),console.log("this.getColumnCfgs()",this.getColumnCfgs());var i=this._getValidUuids(e,this.getColumnCfgs()),n=this._getValidUuids(e,t.columns);if(console.log("app scoped columns:",i),this._hasViewSelected())t.columns=n;else{var o=_.difference(i,n);o.length>0&&(t.columns=t.columns.concat(o)),t.columns=_.filter(t.columns,function(e){return _.contains(i,_.isObject(e)?e.dataIndex:e)},this)}}t.sorters&&(t.sorters=this._getValidSorters(t.sorters),_.isEmpty(t.sorters)&&delete t.sorters)}},_getValidUuids:function(e,t){return _.reduce(t,function(t,i){var n=this._getColumnDataIndex(i);return this._getModelField(e,n)&&t.push(n),t},[],this)},_getModelField:function(e,t){return console.log("dataIndex",t),console.log("model ",e.getModels()[0].getField(t)),e.getModels()[0].getField(t)},_getColumnDataIndex:function(e){return _.isObject(e)?e.dataIndex:e},_onBeforeGridStateSave:function(e,t){console.log("grid:",e),console.log("state:",t),console.log("c config",e.config.columnCfgs);var i=this._getColumnNamesFromState(t);_.isEmpty(i)||(this._setColumnNames(i),this._userHasPermissionsToEditPanelSettings()&&this.updateSettingsValues({settings:{columnNames:i.join(",")}}))},_onGridStoreWarning:function(e,t,i){var n=_.filter(t,function(e){return Rally.util.String.startsWith(e,"Could not parse ")});n.length&&(_.assign(i.resultSet,{count:0,records:[],total:0,totalRecords:0}),this._showInvalidQueryMessage(this.gridboard.getGridOrBoard(),n))},_showInvalidQueryMessage:function(e,t){e.noDataPrimaryText="Invalid Query",e.noDataSecondaryText=_.map(t,function(e){return"<div>"+e+"</div>"}).join("")},_getValidSorters:function(e){return _.filter(e,function(e){return _.any(this.models,function(t){var i=t.getField(e.property);return i&&i.sortable})},this)},_userHasPermissionsToEditPanelSettings:function(){return this.isEditable},_getColumnNamesFromState:function(e){return console.log("column from state:",e),_(e&&e.columns).map(function(e){return _.isObject(e)?e.dataIndex:e}).compact().value()}}),e.define("Rally.ui.picker.FieldPicker",{alias:"widget.rallyfieldpicker",extend:Rally.ui.picker.MultiObjectPicker,margin:"10px 0 255px 0",maxLength:32,readyEvent:"ready",width:300,clientMetrics:[{beginMethod:"expand",endMethod:"_onStoreLoad",description:"object picker loaded"},{method:"_onListItemClick",description:"list item clicked"},{event:"focus",description:"field picker focused"},{event:"blur",description:"field picker blurred"}],config:{maxLength:32,toolTipConfig:{html:'<h3 class="tooltip-heading">Field Picker Tip</h3><div class="tooltip-text">Start typing in the box to filter fields.</div>',destroyAfterHide:!0,showOnClick:!0,closable:!0},selectedTextLabel:"Selected Fields",availableTextLabel:"Available Fields",listCfg:{emptyText:'<div class="rui-multi-object-picker-empty-text">Type to filter fields</div>'},filterFieldName:"displayName",recordKey:"name",selectionKey:"name",rowSelectable:!0,modelTypes:[],fieldWhiteList:[],fieldBlackList:[],showAllCustomFields:!0,shouldRespondToScopeChange:!0,pickerCfg:{style:{border:"1px solid #DDD","border-top":"none"},height:248,shadow:!1},alwaysExpanded:!0,pickerAlign:"tl-bl",maintainScrollPosition:!0},constructor:function(e){console.log("constructing ..............."),this.enableGrouping=!0,this.mergeConfig(e),this.callParent([this.config])},initComponent:function(){console.log("initing ..............."),this.addEvents("fieldpickerstoreloaded"),this.callParent(arguments)},getStore:function(){return this.store},_fieldIsInWhiteList:function(t){return!this.fieldWhiteList.length||e.Array.contains(this.fieldWhiteList,t.name)},_fieldIsInBlackList:function(t){return e.Array.contains(this.fieldBlackList,t.name)},_shouldShowCustomField:function(e){return console.log("should show custom:",e,this.showAllCustomFields),e.custom&&this.showAllCustomFields},setValue:function(t){if(this.store)if(e.isString(t)){var i=_.values(this.models),n=_(t.split(",")).map(function(e){var t=_(i).invoke("getField",e).compact().value(),n=_.filter(t,{custom:!1}),o=_.difference(t,n);return 0===n.length?o:n}).flatten().compact().pluck("name").unique().value();this.callParent([n.join(",")])}else this.callParent(arguments);else this.on("fieldpickerstoreloaded",function(){this.setValue(t)},this)},_filterApplied:function(){this._groupRecords(this._getRecordValue())},_loadStore:function(t){var i=function(e){this.fireEvent("fieldpickerstoreloaded",this,this.store),this.store.mon(this.store,"filterbytextinput",this._filterApplied,this),e&&e.success&&e.success.call(e.scope,[])};Rally.data.ModelFactory.getModels({types:this.modelTypes,context:this.context||this.getStoreConfig().context,success:function(n){console.log("models:",n);var o=this._buildStoreData(n);this.models=n,this.store=this._createStoreWithData(e.Object.getValues(o)),i.call(this,t)},failure:function(){this.store=this._createStoreWithData([]),i.call(this,t)},scope:this,requester:this})},_buildStoreData:function(t){var i={},n=1===e.Object.getSize(t);return e.Object.each(t,function(o,s){console.log("all fiedlds for model:",s,s.getFields());var r=_.filter(s.getFields(),function(e){return(!n||!e.isMappedFromArtifact)&&this._shouldShowField(e)},this),l=_.difference(e.Object.getValues(t),[s]);_.each(r,function(e){var t=e.name.replace(/^c_/,"");if(!i[t]){i[t]={name:e.name,displayName:Rally.ui.renderer.FieldDisplayNameRenderer.getDisplayName(e)};var n=_.filter(l,function(e){return e.hasField(t)&&this._shouldShowField(e.getField(t))},this);if(n.length!==l.length){var o=[s.displayName].concat(_.pluck(n,"displayName"));o=_.map(o,function(e){return e.replace("Portfolio Item ","")}),i[t].displayName+=" ("+o.join(", ")+")"}}},this)},this),i},_shouldShowField:function(e){return console.log("should show field",e),e.hidden=!1,!1===e.hidden&&(this._fieldIsInWhiteList(e)||this._shouldShowCustomField(e))&&!this._fieldIsInBlackList(e)},_createStoreWithData:function(t){return e.create("Ext.data.Store",{fields:[{name:"displayName",sortType:e.data.SortTypes.asUCString},{name:"name"}],sorters:[{property:"displayName",direction:"ASC"}],data:t,proxy:{type:"memory"}})},_createStoreAndExpand:function(){this.modelTypes&&this.modelTypes.length&&this._loadStore({success:function(){this.expand(),this.fireEvent("ready",this),Rally.BrowserTest&&Rally.BrowserTest.publishComponentReady(this)},scope:this})},refreshWithNewContext:function(e){this.getShouldRespondToScopeChange()&&this.refreshWithNewModelTypes(this.modelTypes,e)},refreshWithNewModelTypes:function(e,t){this.modelTypes=e,t&&(this.context=t,this.getStoreConfig().context=t.getDataContext()),this._invokeStoreRefresh()},_invokeStoreRefresh:function(){this.picker?this._loadStore({success:function(){this.list.bindStore(this.store),this.refreshView(),this.fireEvent("ready",this)},scope:this}):this.expand()}}),e.define("Rally.ui.grid.ColumnBuilder",{statics:{ICON_FIELDS:["Defects","Discussion","DisplayColor","Milestones","PredecessorsAndSuccessors","Tags","Tasks","TestCases"],ICON_HEADER_FIELDS:{PredecessorsAndSuccessors:"predecessor"}},constructor:function(){this.autoAddAllModelFieldsAsColumns=!0,this.showRowActionsColumn=!0},withEditingEnabled:function(e){return this.enableEditing=e,this},withRankingEnabled:function(e){return this.enableRanking=e,this},withAllColumnsStateful:function(e){return this.allColumnsStateful=e,this},withDefaultColumns:function(e){return this.allColumnsStateful?this.defaultColumns=_.sortBy(e,function(e,t){return"FormattedID"===(_.isObject(e)?e.dataIndex:e)?-1:t}):this.defaultColumns=e,this},withSortableColumns:function(e){return this.sortable=e,this},withDisableColumnMenus:function(e){return this.disableColumnMenus=e,this},withRankColumn:function(e){return this.rankColumnDataIndex=e,this},withSummaryColumns:function(t){return this.summaryColumns=e.Array.from(t),this},shouldAutoAddAllModelFieldsAsColumns:function(e){return this.autoAddAllModelFieldsAsColumns=e,this},shouldShowRowActionsColumn:function(e){return _.isObject(e)?(this.showRowActionsColumn=!0,this.rowActionColumnConfig=e):this.showRowActionsColumn=e,this},shouldResetFlexValuesToDefaults:function(e){return this.resetFlexValues=!!e,this},withEditorsDisabledForColumns:function(e){return this.disabledEditorColumns=e,this},withTreeEnabled:function(e){return this.treeEnabled=e,this},withContext:function(e){return this.context=e,this},build:function(t){return _.compose(this._setContext,this._resetFlexValues,this._stripTagsFromColumnText,this._augmentColumnConfigs,this._removeSortableFromUnsortableColumns,this._disabledEditorColumnsAsNeeded,_.curry(this._alignColumns)(t),_.curry(this._addModelColumns)(t),Rally.ui.grid.GridColumnCfgTransformer.transformForModel(t),Rally.ui.grid.PredecessorsAndSuccessorsColumnTransformer.transformForModel(t),Rally.ui.grid.InvalidGridColumnCfgFilterer.filterForModel(t),Rally.ui.grid.RankColumnTransformer.transformForModel(t),this._addSummaryToColumns,this._transformColumnLabels,this._insertRankingDragHandle,this._insertRowActionsColumn,_.curry(this._insertRankColumn)(t)).call(this,e.clone(this.defaultColumns)||[])},buildCmps:function(t){return _.map(this.build(t),e.widget)},_insertRankingDragHandle:function(t){return this.enableRanking&&e.Array.insert(t,0,[{xtype:this.treeEnabled?"rallytreerankdraghandlecolumn":"rallyrankdraghandlecolumn"}]),t},_insertRowActionsColumn:function(t){return this.showRowActionsColumn&&e.Array.insert(t,0,[_.merge({xtype:"rallyrowactioncolumn"},this.rowActionColumnConfig)]),t},_shouldSetColumnAlignment:function(e,t){var i=t.dataIndex,n=!t.align&&i&&e.getField&&e.getField(i);return n&&_.isFunction(n.getType)},_alignColumns:function(e,t){return _.map(t,function(t){if(this._shouldSetColumnAlignment(e,t)){var i=e.getField(t.dataIndex).getType();"boolean"===i||_.contains(this.self.ICON_FIELDS,t.dataIndex)?t.align="center":_.contains(["quantity","decimal","integer","collection"],i)&&(t.align="right")}return t},this)},_transformColumnLabels:function(e){return _.map(e,function(e){return _.isString(e)&&Rally.ui.renderer.FieldDisplayNameRenderer.getDisplayName(e)&&(e={dataIndex:e}),_.isObject(e)&&e.hasOwnProperty("dataIndex")&&(this.self.ICON_HEADER_FIELDS[e.dataIndex]?(e.cls="picto icon-"+this.self.ICON_HEADER_FIELDS[e.dataIndex],e.text="&nbsp;&nbsp;&nbsp;&nbsp;"):e.hasOwnProperty("text")||this._setFieldLabelOnColumnConfig(e)),e},this)},_removeHiddenColumns:function(e){return _.filter(e,function(e){return!e.modelField||!e.modelField.hidden})},_addModelColumns:function(t,i){var n=i;if(this.autoAddAllModelFieldsAsColumns){var o=Rally.ui.grid.FieldColumnFactory.getBlackListedFieldsForType(t.typePath),s=_(i).pluck("modelField").compact().valueOf(),r=_(t.getFields()).filter(this._isVisibleField).difference(s).value(),l=!e.isEmpty(s),a=_(r).map(function(e){var i=Rally.ui.grid.FieldColumnFactory.getColumnConfigFromField(e,t);return i.hidden=l||_.contains(o,e.name),i.dataIndex&&(this._setFieldLabelOnColumnConfig(i),i.text||(i.hidden=!0)),i},this).value(),d=["FormattedID","Name"];a.sort(function(e,t){var i=_.indexOf(d,e.dataIndex),n=_.indexOf(d,t.dataIndex);return e.dataIndex&&t.dataIndex&&i!==n?-1===i?1:-1===n?-1:i<n?-1:1:e.text<t.text?-1:e.text>t.text?1:0}),n=n.concat(a)}return n},_setFieldLabelOnColumnConfig:function(e){var t=Rally.ui.renderer.FieldDisplayNameRenderer.getDisplayName(e.dataIndex);t&&(e.text=t)},_stripTagsFromColumnText:function(t){return _.each(t,function(t){t.dataIndex&&this.self.ICON_HEADER_FIELDS[t.dataIndex]||(t.text=e.util.Format.stripTags(t.text))},this)},_disabledEditorColumnsAsNeeded:function(e){return _.each(e,function(e){(!this.enableEditing||_.isArray(this.disabledEditorColumns)&&this.disabledEditorColumns.indexOf(e.dataIndex)>-1)&&(delete e.editor,e.tdCls&&(e.tdCls=e.tdCls.replace("editable","")))},this),e},_augmentColumnConfigs:function(t){return _.map(t,function(t){var i=e.applyIf(t,{listeners:{render:function(t){var i=t.up("rallygrid")||t.up("rallytreegrid");i&&e.Function.interceptBefore(t,"toggleSortState",function(){var e=t.textEl.getHTML();i.recordAction({description:"column sorting changed",miscData:{column:e}}),i.recordLoadBegin({description:"grid reload due to sort",miscData:{column:e}}),i.on("load",function(){i.recordLoadEnd()},{single:!0})})}},sortable:this.sortable,menuDisabled:this.disableColumnMenus});return!1===this.sortable&&(i.sortable=!1),i},this)},_removeSortableFromUnsortableColumns:function(e){var t=["rallytreerankdraghandlecolumn","rallyrowactioncolumn"];return _.map(e,function(e){var i=((e||{}).modelField||{}).attributeDefinition||{};return(i.Custom&&"COLLECTION"===i.AttributeType||_.contains(t,e.xtype))&&(e.sortable=!1),e})},_isVisibleField:function(e){return!e.hidden},_insertRankColumn:function(e,t){return e.isTask&&e.isTask()&&(t=_.filter(t,function(e){return"Rank"!==e})),this.rankColumnDataIndex&&(t=_.filter(t,function(e){return e!==this.rankColumnDataIndex},this)).unshift({xtype:"rallyfieldcolumn",text:"Rank",dataIndex:this.rankColumnDataIndex,draggable:!1,resizable:!1,width:45,sortable:!0}),t},_addSummaryToColumns:function(e){return _.map(e,function(e){var t=_.isString(e)?{dataIndex:e}:e,i=_.find(this.summaryColumns,function(e){return t.dataIndex===e.field});return i?_.assign(t,{summaryRenderer:function(e){return"<span class='rollup'>"+e+" "+i.units+"</span>"},summaryType:i.type}):e},this)},_resetFlexValues:function(e){return this.resetFlexValues&&_.each(e,this._resetFlexValueForColumn),e},_resetFlexValueForColumn:function(e){e.flex=Rally.ui.grid.FieldColumnFactory.getDefaultFlexForField(e.dataIndex,e.flex)},_setContext:function(e){return _.each(e,function(e){e.context=this.context},this),e}})}();

            Rally.launchApp('Rally.apps.customlist.CustomListApp', {
                name:"S838697-CustomList",
                parentRepos:"",
                version:"0.1.1"
            });

        });
    </script>


    <style type="text/css">
        
    </style>
</head>
<body>
</body>
</html>
